<!--<ng-container *ngIf='panel'>-->
<ng-container *ngIf='panel$ | async as panel'>
  <ng-container *ngIf='panelNg$ | async as panelNg'>
    <div
      class='flex whitespace-pre-wrap content-center items-center justify-center border-blue-500 bg-white w-8 h-8'
    >
      <app-panel-link
        [isNegativeLink]='panelNg.isSelectedNegativeTo'
        [isPositiveLink]='panelNg.isSelectedPositiveTo'
        class='pointer-events-none z-20 relative left-2'
      ></app-panel-link>
      <ng-container [ngSwitch]='panel?.rotation'>
        <ng-container *ngSwitchCase='0'>
          <svg viewBox='0 0 100 100' class='pointer-events-none relative'>
            <path
              class='stroke-slate-800 fill-none stroke-[8px] z-10'
              d='
              M 30, 0
              V 100
              '
            />
            <path
              class='stroke-slate-800 fill-none stroke-[8px] z-10'
              d='
              M 70, 0
              V 100
              '
            />
          </svg>
        </ng-container>
        <ng-container *ngSwitchCase='1'>
          <svg viewBox='0 0 100 100' class='pointer-events-none z-10 relative'>
            <path
              class='stroke-slate-800 fill-none stroke-5 z-10'
              d='
              M 0, 30
              H 100
              '
            />
            <path
              class='stroke-slate-800 fill-none stroke-5 z-10'
              d='
              M 0, 70
              H 100
              '
            />
          </svg>
        </ng-container>
      </ng-container>
      <ng-container *ngrxLet='(panelLinkPath$ | async) as panelLinkPath'>
        <div
          appPanelDirective
          [id]='panel.id'
          [panelNg]='panelNg'
          [panelLinkPath]='panelLinkPath'
          (contextmenu)='onRightClick($event, panel)'
          [cdkDragData]='panel'
          [ngStyle]="{
            height: panel?.rotation === 0 ? '18px' : '23px',
            width: panel?.rotation === 0 ? '23px' : '18px'
          }"
          cdkDrag
          class='absolute border border-black flex items-center justify-center content-center hover:bg-red-500'

        >
          <!--         [matTooltip]='displayTooltip((panelNg.stringSelected === 1), (selectedStringTooltip$ | async)!)'
                   [matTooltipDisabled]='panelNg.stringSelected !== 1'
                   matTooltipPosition='right'-->
          <ng-container *ngIf='panelNg.stringSelected === 1 else stringNotSelected'>

            <div class='relative bottom-2.5' *ngIf='panelLinkPath'>
              {{ panelLinkPath.link + ":" + panelLinkPath.count }}
            </div>

          </ng-container>
          <ng-template #stringNotSelected>
            <div class='relative  text-xs' *ngIf='panelStringName$ | async as stringName'>
              {{ stringName }}
            </div>
          </ng-template>

        </div>
      </ng-container>
    </div>
  </ng-container>
</ng-container>

<div
  [matMenuTriggerFor]='rightMenu'
  [style.left]='menuTopLeftPosition.x'
  [style.top]='menuTopLeftPosition.y'
  style='visibility: hidden; position: fixed'
></div>

<mat-menu #rightMenu='matMenu'>
  <ng-template matMenuContent>
    <app-panel-menu
      class='right-click-menu bg-white'
      [panel]='(panel$ | async)!' [panelNg]='(panelNg$ | async)!'></app-panel-menu>
  </ng-template>
</mat-menu>
