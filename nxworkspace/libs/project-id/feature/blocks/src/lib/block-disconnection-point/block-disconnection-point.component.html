<ng-container *ngIf="disconnectionPoint$ | async as disconnectionPoint">
  <ng-container
    *ngrxLet="{
      positiveTo: selectedPositiveTo$ | async,
      negativeTo: selectedNegativeTo$ | async
    } as selectedLinks"
  >
    <div class="drop-zone">
      <grid-panel-link
        [isNegativeLink]="selectedLinks?.negativeTo === disconnectionPoint.id"
        [isPositiveLink]="selectedLinks?.positiveTo === disconnectionPoint.id"
        class="drop-zone__svg"
      ></grid-panel-link>
      <div
        #disconnectionPointDiv
        (click)="dpAction(disconnectionPoint)"
        (contextmenu)="onRightClick($event, disconnectionPoint)"
        *ngrxLet="selectedId$ | async as selectedId"
        [cdkDragData]="disconnectionPoint"
        [class.drop-zone__bg-default]="(selectedId$ | async) !== disconnectionPoint.id"
        [class.drop-zone__bg-negative]="selectedLinks?.negativeTo === disconnectionPoint.id"
        [class.drop-zone__bg-positive]="(selectedPositiveTo$ | async) === disconnectionPoint.id"
        [class.drop-zone__bg-selected]="
          selectedId === disconnectionPoint.id || selectedId === disconnectionPoint.stringId
        "
        [class.drop-zone__bg-to-join]="(dpToJoin$ | async)?.id === disconnectionPoint.id"
        [matTooltip]="displayTooltip(disconnectionPoint)"
        [style.border]="'2px solid ' + disconnectionPoint.color"
        cdkDrag
        class="drop-zone__disconnection-point"
        matTooltipPosition="right"
      >
        DP
      </div>
    </div>
  </ng-container>
</ng-container>

<div
  [matMenuTriggerFor]="rightMenu"
  [style.left]="menuTopLeftPosition.x"
  [style.top]="menuTopLeftPosition.y"
  style="visibility: hidden; position: fixed"
></div>

<mat-menu #rightMenu="matMenu">
  <ng-container *ngIf="disconnectionPoint$ | async as disconnectionPoint">
    <ng-template matMenuContent>
      <div class="right-click-menu">
        <button class="right-click-menu__button" mat-menu-item>Edit</button>
        <button
          (click)="deleteDisconnectionPoint(disconnectionPoint)"
          class="right-click-menu__button"
          mat-menu-item
        >
          Delete
        </button>
      </div>
    </ng-template>
  </ng-container>
</mat-menu>
