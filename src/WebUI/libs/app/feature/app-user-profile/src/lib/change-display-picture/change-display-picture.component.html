<ng-container *ngIf="user$ | async as user">
  <!--  <ng-container *ngIf='appUser$ | async as appUser'></ng-container>-->
  <!--  <ng-container *ngrxLet="defaultImages$ | async as images">-->
  <div class="flex flex-row justify-evenly">
    <!--    <h3>Current</h3>-->
    <!--    <h3>{{ user.photoUrl }}</h3>-->

    <div class="flex flex-col">
      <label for="current">Current</label>
      <img id="current" width="75px" [src]="user.photoUrl | getCdnUrlString" alt="#" />
    </div>

    <div class="flex flex-col" [hidden]="!selectedImage">
      <label for="selected">Selected</label>
      <img
        *ngIf="selectedImage"
        id="selected"
        width="75px"
        [src]="selectedImage | getFullUrl"
        alt="#"
      />
    </div>
  </div>
  <div class="flex items-center justify-center content-center">
    <!--    <div class="flex-wrap flex flex-row w-[80%]">-->
    <!--        <div *ngFor="let image of images; index.ts as i">-->
    <!--      <div *ngIf='i < 10' class='flex'>-->

    <ng-container *ngIf="defaultImages$ | async as images">
      <cdk-virtual-scroll-viewport
        #viewport
        style="overflow-y: scroll; height: 400px"
        itemSize="75px"
        class="w-[100%] min-w-max"
      >
        <div class="flex-wrap flex flex-row justify-evenly">
          <img
            *ngFor="let image of images"
            (load)="loadedImage(images)"
            [hidden]="!allImagesLoaded"
            (click)="selectImage(image)"
            [ngClass]="{ 'bg-blue-400': selectedImage === image }"
            class="my-2"
            width="75px"
            [src]="image | getFullUrl"
            alt="#"
          />
        </div>
      </cdk-virtual-scroll-viewport>
    </ng-container>

    <!--        <mat-progress-bar
              *ngIf="!allImagesLoaded"
              mode="determinate"
              [value]="loaded / (imagesLength$ | async)!"
            ></mat-progress-bar>-->

    <!--      </div>-->
    <!--      <div *ngIf='i > 10' class='flex'>-->
    <!--        <img [src]='image | getFullUrl' alt='#' />-->
    <!--      </div>-->
    <!--        <div *ngFor=''></div>-->
    <!--        </div>-->
    <!--    </div>-->
  </div>
  <div class="flex items-center content-center justify-center relative top-[25%]">
    <mat-spinner *ngIf="!allImagesLoaded"></mat-spinner>
  </div>
  <footer class="absolute bottom-0 left-0 w-full bg-white">
    <div mat-dialog-actions align="end">
      <button mat-button mat-dialog-close="">Cancel</button>
      <button mat-button (click)="updateProfileDp(user.displayName)" cdkFocusInitial>
        Update Profile DP
      </button>
    </div>
  </footer>
  <!--  <div mat-dialog-actions align="end">
      <button mat-button>No Thanks</button>
      <button mat-button cdkFocusInitial>Ok</button>
    </div>-->

  <!--  </ng-container>-->
</ng-container>
