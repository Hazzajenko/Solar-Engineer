<dialog-backdrop-template-component #dialog>
	<div
		@increaseScaleAndOpacity
		class="relative w-1/2 min-w-fit h-3/4 left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 overflow-y-auto p-4"
	>
		<div class="relative bg-slate-100 rounded-lg shadow dark:bg-gray-700" id="dialog-content">
			<button
				(click)="dialog.closeDialog()"
				class="absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white"
				data-modal-hide="crypto-modal"
				type="button"
			>
				<svg
					aria-hidden="true"
					class="w-5 h-5"
					fill="currentColor"
					viewBox="0 0 20 20"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						clip-rule="evenodd"
						d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
						fill-rule="evenodd"
					></path>
				</svg>
				<span class="sr-only">Close modal</span>
			</button>

			<div class="p-8">
				<h5
					class="inline-flex items-center mb-6 text-sm font-semibold text-gray-500 uppercase dark:text-gray-400"
					id="drawer-label"
				>
					Create Project
				</h5>
				<form (ngSubmit)="onSubmit()" [formGroup]="createProjectForm">
					<div class="grid gap-4 mb-4">
						<div>
							<label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" for="name"
								>Name</label
							>
							<input
								(keyup)="inputChange()"
								[ngClass]="{
									'border-red-500 dark:border-red-500':
										createProjectForm.get('name')?.invalid &&
										createProjectForm.get('name')?.touched,
									'border-gray-500 dark:border-gray-600':
										createProjectForm.get('name')?.valid && createProjectForm.get('name')?.touched
								}"
								class="bg-gray-50 border text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
								formControlName="name"
								id="name"
								name="name"
								placeholder="Add name here"
								required
								type="text"
							/>
						</div>

						<!-- error block -->
						<span
							*ngIf="
								createProjectForm.get('name')?.invalid && createProjectForm.get('name')?.touched
							"
							class="flex items-center font-medium tracking-wide text-red-500 text-xs mt-1 ml-1"
						>
							Project name requires at least 3 characters
						</span>

						<div class="flex items-center">
							<div class="flex -space-x-4">
								<img
									alt="Helene Engles"
									class="w-8 h-8 rounded-full border-2 border-white dark:border-gray-800"
									height="32"
									ngSrc="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/helene-engels.png"
									width="32"
								/>
								<img
									alt="Robert Brown"
									class="w-8 h-8 rounded-full border-2 border-white dark:border-gray-800"
									height="32"
									ngSrc="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/robert-brown.png"
									width="32"
								/>
								<img
									alt="Bonnie Green"
									class="w-8 h-8 rounded-full border-2 border-white dark:border-gray-800"
									height="32"
									ngSrc="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/bonnie-green.png"
									width="32"
								/>
								<a
									class="flex justify-center items-center w-8 h-8 text-xs font-medium text-white bg-gray-700 rounded-full border-2 border-white hover:bg-gray-600 dark:border-gray-800"
									href="#"
									>+9</a
								>
							</div>
							<button
								class="inline-flex items-center py-2 px-3 ml-3 text-xs font-medium text-gray-900 bg-white rounded-lg border border-gray-200 focus:outline-none hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
								type="button"
							>
								<svg
									class="mr-1 -ml-1 w-4 h-4"
									fill="currentColor"
									viewBox="0 0 20 20"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										clip-rule="evenodd"
										d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
										fill-rule="evenodd"
									></path>
								</svg>
								Add members
							</button>
						</div>
						<div>
							<div class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">
								Colour
							</div>
							<div
								*ngrxLet="createProjectForm.get('colour') as selectedColour"
								class="flex items-center space-x-2"
							>
								<button
									(click)="setColour(colour)"
									*ngFor="let colour of TAILWIND_COLOUR_500_VALUES"
									[ngClass]="{
										'ring-2 ring-black': selectedColour?.value === colour
									}"
									[ngStyle]="{
										'background-color': colour,
										'border-color': colour
									}"
									class="w-6 h-6 rounded-sm"
									type="button"
								></button>
							</div>
						</div>
					</div>
					<div class="flex items-center space-x-4">
						<button
							*ngrxLet="createProjectForm.invalid || !createProjectForm.touched as invalid"
							[disabled]="invalid"
							[ngClass]='{
								"opacity-50 cursor-not-allowed": invalid || loading(),
								"bg-blue-500 hover:bg-blue-600": !loading() && !invalid,
								"bg-blue-700 hover:bg-blue-800": invalid,
							}'
							class="w-full text-white inline-flex items-center justify-center font-medium rounded-lg text-sm px-5 py-2.5 text-center focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
							type="submit"
						>
							<app-spinner *ngIf="loading()" color="primary" size="sm" />
							<svg
								class="-ml-1 w-5 h-5 sm:mr-1"
								fill="currentColor"
								viewBox="0 0 20 20"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									clip-rule="evenodd"
									d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
									fill-rule="evenodd"
								></path>
							</svg>

							Add Project
						</button>
						<button
							(click)="dialog.closeDialog()"
							class="w-full inline-flex justify-center text-gray-500 items-center bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"
							data-modal-toggle="createEventModal"
							type="button"
						>
							Discard
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</dialog-backdrop-template-component>
