<dialog-backdrop-template-component #dialog>
	<div class="top-10 w-1/2 min-w-fit h-3/4 overflow-y-auto p-4">
		<div class="col-span-4 sm:col-span-4 md:col-span-5 pl-2">
			<h5
				class="inline-flex items-center mb-1 font-semibold text-gray-800 dark:text-gray-200"
				id="drawer-label"
			>
				Select Project Template
			</h5>

			<div
				*ngrxLet="selectedTemplateName() as selectedTemplateName"
				class="flex-col w-full mb-6 hidden sm:flex"
			>
				<p class="text-xs font-medium text-gray-800 dark:text-gray-200">
					Selected Template:
					<span class="font-normal">{{ selectedTemplateName ?? "None" }}</span>
				</p>
			</div>

			<div class="border-b border-gray-200 dark:border-gray-700 sm:border-0 pb-2">
				<ul
					class="grid gap-x-4 gap-y-8 sm:grid-cols-1 sm:gap-x-6 md:grid-cols-2 lg:grid-cols-4 xl:gap-x-8 max-h-[60vh] overflow-y-auto"
					role="list"
				>
					<li *ngFor="let template of templates" class="relative">
						<div
							(click)="selectTemplate(template)"
							class="group flex items-center justify-center aspect-h-7 aspect-w-10 m-2 overflow-hidden rounded-lg bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100"
						>
							<img
								[ngSrc]="template.photoUrl"
								alt="{{ template.name }} preview"
								class="pointer-events-none object-cover group-hover:opacity-75"
								height="275"
								priority="true"
								width="425"
							/>
							<button class="absolute inset-0 focus:outline-none" type="button">
								<span class="sr-only">View details for {{ template.name }}</span>
							</button>
						</div>
						<p class="pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900">
							{{ template.name }}
						</p>
						<p class="pointer-events-none block text-sm font-medium text-gray-500">
							{{ template.description }}
						</p>
					</li>
				</ul>
			</div>
			<div
				class="flex flex-col items-center mt-1 justify-center space-y-1 sm:flex-row-reverse sm:justify-start sm:space-x-1"
			>
				<div
					*ngrxLet="selectedTemplateName() as selectedTemplateName"
					class="flex flex-col w-full pb-1 sm:hidden"
				>
					<p class="text-sm font-semibold text-gray-800 dark:text-gray-200">Selected Template:</p>
					<p class="text-xs font-semibold">
						{{ selectedTemplateName ?? "None" }}
					</p>
				</div>
				<button
					(click)="onSubmit()"
					[disabled]="!selectedTemplateName()"
					[ngClass]="{
						'opacity-50 cursor-not-allowed bg-blue-700 hover:bg-blue-800': !selectedTemplateName(),
						'bg-blue-500 hover:bg-blue-600': selectedTemplateName()
					}"
					class="bg-primary-500 w-full sm:w-auto text-white inline-flex items-center justify-center font-medium rounded-lg text-sm px-3 py-2 text-center focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
					type="submit"
				>
					<span> Start With Selected Template </span>
				</button>
				<button
					(click)="startWithBlankTemplate()"
					class="inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto"
					type="button"
				>
					Start with a blank project
				</button>
			</div>
		</div>
	</div>
</dialog-backdrop-template-component>
