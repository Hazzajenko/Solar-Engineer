<!--<canvas #canvas
        id='canvas'
        class='absolute inset-0'
        appDesignCanvasApp></canvas>-->
<canvas #canvas
        id='canvas'
        class='absolute inset-0'
        appDesignCanvasNgrxApp></canvas>

<div class='absolute'>
  <div id='fps'></div>
  <div style='display: none'
       id='mouse-pos'></div>
  <div style='display: none'
       id='transformed-mouse-pos'></div>
  <div style='display: none'
       id='scale-element'></div>
  <div style='display: none'
       id='string-stats'></div>
  <div style='display: none'
       id='panel-stats'></div>
  <div style='display: none'
       id='rotate-stats'></div>
</div>

<div
  #keyMap
  id='key-map'
  class='absolute left-5 top-5 z-10'
>
  <!--  [style.display]="state.menu.keyMap ? 'initial' : 'none'"-->
  <app-key-map-component />
</div>

<div #stateValues
     id='state-values'
     class='absolute left-72 top-5 z-10'>
  <app-state-values />
</div>

<div #graphicsMenu
     id='graphics-menu'
     class='absolute right-5 top-5 z-10'>
  <app-canvas-graphics-menu />
  <app-button-builder [active]='true'
                      [size]='"xl"'
                      [text]='"push"'
                      [tone]='"Primary"'
                      (clickEvent)='pushWindow($event)' />
  <!--  <button (click)='windows.push({id: "23123", location: { x: $event.clientX, y: $event.clientY}})'></button>-->
</div>

<app-right-click-menu />
<!--(minimiseEvent)='minimisedWindow.style.display = "block"'-->
<ng-container *ngFor='let window of openWindows$ | async'>
  <app-window
    [windowId]='window.id'
    [ngStyle]='{display: window.isOpen ? "block" : "none"}'
    #windowComponent />
</ng-container>

<ng-container *ngIf='dialog$ | async as dialog'>
  <ng-template
    appDynamicDialog
    [dialog]='dialog'
  ></ng-template>
  <!--                      <ng-template appDynamic [block]='block'></ng-template>-->
</ng-container>
<dialog-move-panels-to-string-v2 />
<!--<app-window
  [location]='{x: 150, y: 150}'
  (minimiseEvent)='minimisedWindow.style.display = "block"'
  #window />-->
<div
  id='minimised-window'
  class='absolute space-x-1  flex left-0 bottom-0 z-10  bg-white  transition-all duration-200 ease-in-out text-center overflow-hidden'
  #minimisedWindow>

  <div
    *ngFor='let window of closedWindows$ | async'
    class='flex justify-between  bg-gray-200  hover:bg-gray-300 rounded-t-lg cursor-pointer  p-2'>
    <div class='flex items-center text-xs text-gray-700 pr-2  font-consolas'>{{window.title}}</div>
    <div class='flex items-center'>

      <button
        (click)='openWindow(window)'
        type='button'
        class='rounded-lg px-2 h-4 items-center justify-center text-xs text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700'
      >
        <app-show-svg
          class='h-3 text-gray-400 group-hover:text-gray-500 relative top-1/2'
          svgPath='window/minimise' />
      </button>
      <button
        (click)='closeWindow(window)'
        type='button'
        class='rounded-lg flex items-center p-2 h-4 text-xs text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700'
      >
        <app-show-svg
          class='h-3 text-gray-400 group-hover:text-gray-500 relative'
          svgPath='window/close' />
      </button>
    </div>
  </div>
</div>
<!--

<div class="absolute top-1 left-5">
  <p>test</p>
</div>
-->

<!--
<div
  (click)='minimisedWindow.style.display = "none"; window.openWindow()'
  id='minimised-window'
  class='absolute left-0 bottom-0 z-10 rounded-t-lg bg-gray-200 p-2 cursor-pointer hover:bg-gray-300 transition-all duration-200 ease-in-out text-center overflow-hidden'
  [style.display]="window.isOpen ? 'none' : 'block'"
  #minimisedWindow>
  <div class='flex justify-between'>
    <div class='flex items-center text-xs text-gray-700 pr-2  font-consolas'>Window</div>
    <div class='flex items-center'>

      <button
        type='button'
        class='rounded-lg px-2 h-4 items-center justify-center text-xs text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700'
      >
        <app-show-svg
          class='h-3 text-gray-400 group-hover:text-gray-500 relative top-1/2'
          svgPath='window/minimise' />
      </button>
      <button
        type='button'
        class='rounded-lg flex items-center p-2 h-4 text-xs text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700'
      >
        <app-show-svg
          class='h-3 text-gray-400 group-hover:text-gray-500 relative'
          svgPath='window/close' />
      </button>
    </div>
  </div>
</div>
-->