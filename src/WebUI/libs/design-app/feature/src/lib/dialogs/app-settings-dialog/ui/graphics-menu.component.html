<ng-container *ngIf='graphicsState() as state'>
  <!--<ng-container *ngIf='graphicsState$ | async as state'>-->
  <div class='rounded bg-slate-100 p-2'>
    <!--    <div
          (click)='toggleGraphics("toggleSelectedPanelFill")'
          class='relative flex items-start p-2 hover:bg-gray-200'
        >
          <div class='flex h-6 items-center'>
            <input
              id='toggle-selected-panel-fill'
              [checked]='state.selectedPanelFill'
              type='checkbox'
              class='h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600'
            />
          </div>
          <div class='pointer-events-none ml-3 text-sm leading-6'>
            <label for='toggle-nearby-lines'
                   class='font-medium text-gray-900'>Selected Panel Fill</label>
          </div>
        </div>-->
    <ng-container
      *ngTemplateOutlet='checkbox;
      context: {
      toggle: "toggleSelectedPanelFill",
      checked: state.selectedPanelFill,
      id: "toggle-selected-panel-fill",
      label: "Selected Panel Fill"}' />
    <ng-container
      *ngTemplateOutlet='checkbox;
      context: {
      toggle: "toggleSelectedStringPanelFill",
      checked: state.selectedStringPanelFill,
      id: "toggle-selected-string-panel-fill",
      label: "Selected String Panel Fill"}' />
    <ng-container
      *ngTemplateOutlet='checkbox;
      context: {
      toggle: "toggleColouredStrings",
      checked: state.colouredStrings,
      id: "toggle-coloured-strings",
      label: "Coloured Strings"}' />
    <ng-container
      *ngTemplateOutlet='checkbox;
      context: {
      toggle: "toggleCreatePreview",
      checked: state.createPreview === CREATE_PREVIEW_STATE.CREATE_PREVIEW_ENABLED,
      id: "toggle-create-preview",
      label: "Create Preview"}' />
    <ng-container
      *ngTemplateOutlet='checkbox;
      context: {
      toggle: "toggleNearbyLineGraphics",
      checked: state.nearbyLines !== NEARBY_LINES_STATE.NEARBY_LINES_DISABLED,
      id: "toggle-nearby-lines",
      label: "Nearby Lines"}' />
    <select
      [disabled]='state.nearbyLines === NEARBY_LINES_STATE.NEARBY_LINES_DISABLED'
      (change)='changeNearbyGraphics($event)'
      id='nearby-graphics'
      name='nearby-graphics'
      class='mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6'
    >
      <option
        *ngFor='let option of nearbyGraphicsSelectMenuArray'
        [selected]='state.nearbyLines === option.value'
        [value]='option.value'
      >
        {{ option.label }}
      </option>
    </select>

    <!--    <ng-container *ngTemplateOutlet='panelItem; context: {panel}'></ng-container>-->
    <!--    <div
          (click)='toggleGraphics("toggleSelectedPanelFill")'
          class='relative flex items-start p-2 hover:bg-gray-200'
        >
          <div class='flex h-6 items-center'>
            <input
              id='toggle-selected-string-panel-fill'
              [checked]='state.selectedPanelFill'
              type='checkbox'
              class='h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600'
            />
          </div>
          <div class='pointer-events-none ml-3 text-sm leading-6'>
            <label for='toggle-nearby-lines'
                   class='font-medium text-gray-900'>Selected Panel Fill</label>
          </div>
        </div>-->
    <!--    <div
          (click)='toggleGraphics("toggleColouredStrings")'
          class='relative flex items-start p-2 hover:bg-gray-200'
        >
          <div class='flex h-6 items-center'>
            <input
              id='toggle-coloured-strings'
              [checked]='state.colouredStrings'
              type='checkbox'
              class='h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600'
            />
          </div>
          <div class='pointer-events-none ml-3 text-sm leading-6'>
            <label for='toggle-nearby-lines'
                   class='font-medium text-gray-900'>Coloured Strings</label>
          </div>
        </div>-->
    <!--    <ng-container *ngrxLet='state.createPreview as createPreviewState'>
          <div
            (click)='toggleCreatePreview()'
            class='relative flex items-start p-2 hover:bg-gray-200'
          >
            <div class='flex h-6 items-center'>
              <input
                id='toggle-create-preview'
                [checked]='createPreviewState === CREATE_PREVIEW_STATE.CREATE_PREVIEW_ENABLED'
                type='checkbox'
                class='h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600'
              />
            </div>
            <div class='pointer-events-none ml-3 text-sm leading-6'>
              <label for='toggle-nearby-lines'
                     class='font-medium text-gray-900'>Create Preview</label>
            </div>
          </div>
        </ng-container>-->
    <!--    {{state.}}-->
    <!-- <ng-container *ngrxLet='state.nearbyLines as nearbyState'>
       <div
         (click)='toggleNearbyLineGraphics()'
         class='relative flex items-start p-2 hover:bg-gray-200'
       >
         <div class='flex h-6 items-center'>
           <input
             id='toggle-nearby-lines'
             [checked]='nearbyState !== NEARBY_LINES_STATE.NEARBY_LINES_DISABLED'
             type='checkbox'
             class='h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600'
           />
         </div>
         <div class='pointer-events-none ml-3 text-sm leading-6'>
           <label for='toggle-nearby-lines'
                  class='font-medium text-gray-900'>Nearby Lines</label>
         </div>
       </div>
       <label for='nearby-graphics'
              class='text-xs font-medium text-gray-900'>
         <span>Nearby Lines</span>
       </label>
       &lt;!&ndash;      (change)="changeNearbyGraphics($event)"&ndash;&gt;
       &lt;!&ndash;      (change)="graphicsMachine.sendEvent($any($event).target.value)"&ndash;&gt;
       <select
         [disabled]='nearbyState === NEARBY_LINES_STATE.NEARBY_LINES_DISABLED'
         (change)='changeNearbyGraphics($event)'
         id='nearby-graphics'
         name='nearby-graphics'
         class='mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6'
       >
         <option
           *ngFor='let option of nearbyGraphicsSelectMenuArray'
           [selected]='state.nearbyLines === option.value'
           [value]='option.value'
         >
           {{ option.label }}
         </option>
       </select>
     </ng-container>-->
  </div>
</ng-container>

<ng-template #checkbox
             let-toggle='toggle'
             let-checked='checked'
             let-id='id'
             let-label='label'>
  <div
    (click)='toggleGraphics(toggle)'
    class='relative flex items-start p-2 hover:bg-gray-200'
  >
    <div class='flex h-6 items-center'>
      <input
        [id]='id'
        [checked]='checked'
        type='checkbox'
        class='h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600'
      />
    </div>
    <div class='pointer-events-none ml-3 text-sm leading-6'>
      <label for='toggle-nearby-lines'
             class='font-medium text-gray-900'>{{label}}</label>
    </div>
  </div>
</ng-template>